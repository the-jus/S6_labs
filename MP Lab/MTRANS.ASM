ASSUME CS:CODE,DS:DATA

;Code to print string
PRINTS MACRO P
MOV DX, OFFSET P
MOV AH,09H
INT 21H
ENDM

DATA SEGMENT
	NEWLINE DB 0AH,0DH,"$"
	SPACE DB "  $"
	MSG1 DB "INPUT MATRIX$"
	MSG2 DB "TRANSPOSE$"
	ROW DB 03H
	COL DB 03H
        MAT DW 11,22,33,44,55,66,77,88,99
	ADDR DW 1 DUP(?)
	COUNT DW 1 DUP(?)
DATA ENDS

CODE SEGMENT
MAIN PROC
START:	MOV AX,DATA
		MOV DS,AX

		PRINTS MSG1
		PRINTS NEWLINE
		CALL PRINTMAT

		PRINTS NEWLINE
		PRINTS MSG2
		PRINTS NEWLINE

		LEA SI,MAT
		MOV BX,0101H

L1:		MOV AX,SI
		MOV DI,AX

L2:		PUSH SI
		MOV COUNT,BX
		CALL PRINTNUM
		MOV BX,COUNT
		MOV CL,ROW
		MOV	CH,COL

		CMP BL,CL
		JZ L3
		MOV AX,0000H
		ADD AL,CH
		MOV DX,0002H
		MUL DX
		ADD SI,AX
		INC BL
		PRINTS SPACE
		JMP L2

L3:		CMP BH,CH
		JZ L4
		MOV AX,DI
		MOV SI,AX
		ADD SI,0002H
		INC BH
		MOV BL,01H
		PRINTS NEWLINE
		JMP L1

L4:		MOV AH,4CH
		INT 21H

MAIN ENDP

;Subprogram to print matrix
PRINTMAT PROC

		POP DI
		LEA SI,MAT
		MOV BX,0101H

LM1:	PUSH SI
		MOV COUNT,BX
		CALL PRINTNUM
		MOV BX,COUNT
		MOV CL,ROW
		MOV	CH,COL

		CMP BH,CH
		JZ LM2
		PRINTS SPACE
		ADD SI,0002H
		INC BH
		JMP LM1

LM2:	CMP BL,CL
		JZ LM3
		INC BL
		MOV BH,01H
		ADD SI,0002H
		PRINTS NEWLINE
		JMP LM1

LM3:	PUSH DI
		RET

PRINTMAT ENDP

;Subprogram to print number
PRINTNUM PROC

        POP ADDR
        POP SI
        
	    MOV AX,[SI]
        MOV CH,00H
        MOV BX,10
        
LH1:    MOV DX,0000H
        DIV BX
        PUSH DX
        INC CH
        CMP AX,0
        JNE LH1
        
LH2:    POP DX
		CMP DX,000AH
		JL LH3
		ADD DX,30H
		MOV AH,02H
		INT 21H
		JMP LH4

LH3:	ADD DX,30H
		MOV AH,02H
		INT 21H

LH4:    DEC CH
        JNZ LH2

        PUSH ADDR
        RET
        
PRINTNUM ENDP

CODE ENDS
END START
